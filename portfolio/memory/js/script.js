const memoryBoard=document.querySelector(".memory-board"),bellSound=document.querySelector(".bell"),finishSound=document.querySelector(".finish"),restartSound=document.querySelector(".restart");let cardCount=15,finishedPairs=0,isRestarting=!1,duration=50;const cardTypes={one:0,two:0,three:0,four:0,five:0,six:0,seven:0,eight:0},themes={default:{main:"#1A1423",accent:"#EACDC2"},retro:{main:"#212027",accent:"#F22F08"},mediterranean:{main:"#10000C",accent:"#EFA747"},calm:{main:"#132226",accent:"#BE9063"},aqua:{main:"#02231C",accent:"#107050"}};let newTypes=JSON.parse(JSON.stringify(cardTypes));const randomProperty=e=>{let t=Object.keys(e),o=t[Math.floor(Math.random()*t.length)+0];return 2==e[o]?randomProperty(e):(e[o]+=1,o)},startBoard=()=>{for(i=0;i<=cardCount;i++){const e=document.createElement("div"),t=document.createElement("div");e.setAttribute("class","memory-card-container"),t.setAttribute("class","memory-card hidden"),e.appendChild(t);let o=randomProperty(newTypes);t.dataset.cardType=o,memoryBoard.appendChild(e)}},themeButton=document.querySelector(".theme-btn"),playButton=document.querySelector(".play-btn"),diffButton=document.querySelector(".difficulty-btn"),timerIcon=document.querySelector(".timer"),difficultiesKeys=["easy","medium","hard"],difficulties={easy:{size:65,duration:60,color:"green"},medium:{size:85,duration:50,color:"orange"},hard:{size:100,duration:30,color:"red"}};let selectedDifficulty=0;diffButton.addEventListener("click",()=>{isRestarting||(selectedDifficulty++,console.log(selectedDifficulty),selectedDifficulty>difficultiesKeys.length-1&&(selectedDifficulty=0),difficulty=difficultiesKeys[selectedDifficulty],difficulty=difficulties[difficulty],console.log(difficulty),duration=difficulty.duration,timerIcon.style.width=difficulty.size+"%",timerIcon.style.height=difficulty.size+"%",timerIcon.style.fill=difficulty.color,setTimeout(()=>{timerIcon.style.fill=getComputedStyle(document.body).getPropertyValue("--main-color")},1e3),restart())}),playButton.addEventListener("click",()=>{audio.paused&&(audio.play(),audio.volume=.7),playButton.classList.add("removed"),themeButton.classList.remove("no-play"),diffButton.classList.remove("no-play"),memoryBoard.classList.remove("no-play"),memoryBoard.classList.add("started"),restartButton.classList.remove("hidden")}),startBoard();const memoryCards=document.querySelectorAll(".memory-card-container");let selectedAmount=0;const resetCards=()=>{document.querySelectorAll(".selected").forEach(e=>{e.classList.add("hidden"),e.classList.remove("selected")}),selectedAmount=0},completeGame=()=>{memoryBoard.classList.add("completed"),countBorder.classList.remove("count-down"),countBorder.style.opacity="0",finishSound.play(),finishSound.volume=.3,setTimeout(()=>{audio.pause(),bellSound.play(),bellSound.volume=.1},1500),setTimeout(function(){memoryBoard.classList.remove("completed"),countBorder.style.opacity="1",restart(),audio.play()},6e3)};memoryCards.forEach(e=>{e.addEventListener("click",()=>{if(e.children[0].classList.contains("finished")||isRestarting||memoryBoard.classList.contains("no-play"));else if(2==selectedAmount||e.children[0].classList.contains("selected"));else{selectedAmount++;let t=e.children[0];t.classList.remove("hidden"),t.classList.add("selected");const o=document.querySelectorAll(".selected");if(2==o.length){let e=o[0],t=o[1];e.dataset.cardType==t.dataset.cardType?(bellSound.playing&&bellSound.stop(),memoryBoard.classList.add("finish-border"),setTimeout(()=>{memoryBoard.classList.remove("finish-border")},1500),bellSound.play(),bellSound.volume=.05,e.classList.add("finished"),t.classList.add("finished"),e.parentElement.classList.add("no-bg"),t.parentElement.classList.add("no-bg"),e.classList.remove("selected"),t.classList.remove("selected"),selectedAmount=0,8==(finishedPairs+=1)&&setTimeout(completeGame,500)):setTimeout(resetCards,700)}}})});const restart=()=>{isRestarting||(countDown(),isRestarting=!0,selectedAmount=0,newTypes=JSON.parse(JSON.stringify(cardTypes)),memoryCards.forEach(e=>{e.children[0].classList.remove("finished"),e.children[0].classList.remove("selected"),e.children[0].classList.add("hidden"),e.classList.add("spin"),e.classList.remove("no-bg"),finishedPairs=0,setTimeout(function(){let t=randomProperty(newTypes);e.children[0].dataset.cardType=t,e.classList.remove("spin"),isRestarting=!1},1e3)}))},audio=document.querySelector(".audio");audio.loop=!0;const restartButton=document.querySelector(".restart-btn"),countBorder=document.querySelector(".count-border"),rect=document.querySelector("rect");let timer,firstClick=!0,countingDown=!1;const countDown=()=>{memoryBoard.classList.contains("completed")||(clearTimeout(timer),rect.classList.contains("count-down")&&rect.classList.toggle("count-down"),firstClick?(setTimeout(function(){rect.classList.add("count-down"),rect.style.animationDuration=duration+"s"},3e3),timer=setTimeout(function(){restart(),restartSound.play(),restartSound.volume=.05,memoryBoard.classList.add("fail-border"),setTimeout(()=>{memoryBoard.classList.remove("fail-border")},1500)},1e3*duration+3e3),firstClick=!1):(setTimeout(function(){rect.classList.add("count-down"),rect.style.animationDuration=duration+"s"},100),timer=setTimeout(function(){restart(),restartSound.play(),restartSound.volume=.05,memoryBoard.classList.add("fail-border"),setTimeout(()=>{memoryBoard.classList.remove("fail-border")},1500)},1e3*duration)))},countRect=document.querySelector(".border");let amountOfThemes=Object.keys(themes).length;for(let e=0;e<amountOfThemes;e++){let t=Object.keys(themes)[e],o=themes[t].main,s=themes[t].accent,r=document.createElement("div");r.classList.add("theme-selection"),r.style.backgroundColor=o,r.style.borderColor=s,r.dataset.theme=Object.keys(themes)[e],themeButton.appendChild(r)}const changeTheme=e=>{let t=themes[e],o=document.documentElement;o.style.setProperty("--main-color",t.main),o.style.setProperty("--accent-color",t.accent),localStorage.setItem("theme",e)};let themeButtons=document.querySelectorAll(".theme-selection");if(themeButtons.forEach(e=>{e.addEventListener("click",()=>{let t=e.dataset.theme;changeTheme(t),themeButtons[0]!==e&&(themeButton.removeChild(e),themeButton.insertBefore(e,themeButtons[0]),themeButtons=document.querySelectorAll(".theme-selection"))})}),localStorage.getItem("theme")&&changeTheme(localStorage.getItem("theme")),!localStorage.getItem("accepted")){const e=document.createElement("div");e.classList.add("cookie-top");const t=document.createElement("p"),o=document.createElement("button");t.textContent="This website uses cookies to ensure you get the best experience on this website.",o.textContent="Accept",e.appendChild(t),e.appendChild(o),document.body.appendChild(e);const s=document.querySelector("button"),r=document.querySelector(".cookie-top");s.addEventListener("click",()=>{r.remove(),localStorage.setItem("accepted","true")})}playButton.addEventListener("click",countDown),restartButton.addEventListener("click",restart)
